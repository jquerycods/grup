SpilGames("SWP Utils DOMSelect Cache DOMEvent BeLazy Cookie Net ThumbnailTracker".split(" "),function(d,e,l,g,u,m,v,w,x){d.init("recent_played_games_menu");var p=window.document,n=p.getElementById("wdg_recent_played_games_menu"),b=d.getProperty("*"),y=b.global_user_id,z=b.siteid,A=d.get("spilgames.module.spapi.backend"),h="recent.played.games."+b.global_user_id,k=function(a,c){g.getItem("backend"===a?h:"recent.played.games",function(a){c(e.isArray(a)?a:[])})},q=function(a,c){g.setItem({key:"backend"===
a?h:"recent.played.games",value:c.slice(0,b.games_limit_client_storage),expires:15552E3})},B=function(a){g.getItem(h+".synced",function(c){a(e.isBoolean(c)?c:!1)})},r=function(a){g.setItem({key:h+".synced",value:!0===a,expires:2592E3})},C=function(a){var c=[];a.forEach(function(a){c.push({id:a,date:0})});a={url:A+"v1/recently-played/"+z+"/"+y,type:"POST",dataType:"json",data:JSON.stringify({items:c.slice(0,b.games_limit_authenticated)}),headers:{"x-auth-token":v.getItem("token")}};w.send(a,function(a){a.isError?
r(!1):r(!0)})},D=function(){var a=p.getElementById("authentication-incentive");a&&u.add(a,"click",function(){d.System.emit("popup.register.open")});d.getProperty("no_recent_games")?d.System.emit("recent.played.empty"):(d.System.emit("recent.played.filled"),window.setTimeout(m.trigger,500));m.handleImagesIn(n);x.track(n)},t=function(a,c,b){var f=a[0];f?k(f,function(E){a.shift();c[f]=E;t(a,c,b)}):b(c)};l=function(){if(!0!==b.track_only){var a=["client"];"backend"===b.storage_endpoint&&(a[1]="backend");
t(a,{},function(a){d.Widget.refresh({app_list:JSON.stringify(a),ui_format:b.ui_format,xhr:!0,lazyload_images:b.lazyload_images,lazyload_from_item:b.lazyload_from_item},{callback:D})})}};var F=e.once(l);k("client",function(a){var c=a.map(function(a){if(e.isObject(a)&&a.gid)return a.gid}).filter(function(a){return e.isString(a)}),d=a.filter(function(a){return e.isString(a)});a=a.length-c.length-d.length;var f;if(0<c.length||0<a)f=e.combine(d,c),q("client",f),"backend"===b.storage_endpoint&&k("backend",
function(a){0===a.length&&(a=f,q("backend",a))})});(function(a){"backend"===a&&B(function(a){a||k("backend",function(a){a=a.map(function(a){e.isObject(a)&&a.gid&&(a=a.gid);return a}).filter(function(a){return e.isString(a)});0<a.length&&C(a)})})})(b.storage_endpoint);e.isEmpty(b.wait_on_js_event)&&l();m.until("visible",n,function(){d.System.emit("recent.played.visible")});d.System.init(function(a){switch(a.name){case "inlinegame.open":case b.wait_on_js_event:F()}})});