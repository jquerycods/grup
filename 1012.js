SpilGames(["SWP","SWPUtils","DOMEvent","JSLib"],function(c,f,e,m){var d=document.getElementById("wdg_user_status"),g=document.getElementById("logged-user-avatar"),a=d.querySelector(".unit-counter"),h=!1,k=function(){h=!0;a&&m("api.notification.count",function(b){b.count?(a.innerHTML=b.count,f.removeClass(a,"is-hidden")):f.addClass(a,"is-hidden")})},l=function(){h||k()};c.init("user_status");e.add(d,"click",function(b){for(var a=b.target;!a.id;)a=a.parentNode;switch(a.id){case "login-button-nav":c.System.emit("popup.login.open",
{});b.preventDefault();break;case "logout-button-nav":c.System.emit("auth.logout.request",{}),b.preventDefault()}});a&&(e.add(d,"click",l),e.add(d,"mouseover",l));c.System.init(function(a){switch(a.name){case "avatar.update.current":g&&(g.src=a.body.avatarUrl);break;case "system.notification.update.amount":k()}})});